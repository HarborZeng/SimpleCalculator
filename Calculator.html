<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link href="css/calc-style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<div class="calculator">
    <div class="calc-header">
        <div class="calc-screen-container"><p id="value">0.</p></div>
    </div>
    <div class="calc-body">
        <ul id="calc-list">
            <li class="calc-btn calc-number">1</li>
            <li class="calc-btn calc-number">2</li>
            <li class="calc-btn calc-number">3</li>
            <li class="calc-btn calc-operator">*</li>
            <li class="calc-btn calc-operator">/</li>
            <li class="calc-btn calc-number">4</li>
            <li class="calc-btn calc-number">5</li>
            <li class="calc-btn calc-number">6</li>
            <li class="calc-btn calc-operator">+</li>
            <li class="calc-btn calc-operator">-</li>
            <li class="calc-btn calc-number">7</li>
            <li class="calc-btn calc-number">8</li>
            <li class="calc-btn calc-number">9</li>
            <li class="calc-btn calc-operator">(</li>
            <li class="calc-btn calc-operator">)</li>
            <li class="calc-btn calc-clear calc-operator">c</li>
            <li class="calc-btn calc-number">0</li>
            <li class="calc-btn calc-operator">.</li>
            <li class="calc-btn calc-operator">del</li>
            <li class="calc-btn calc-equal calc-operator">=</li>
            <li class="calc-btn calc-operator">sqrt</li>
            <li class="calc-btn calc-operator">pow</li>
        </ul>
    </div>
</div>
<script type="text/javascript">
  var formula = '';
  var result = '';
  var calcScreen = document.getElementById('value');

  document.getElementById("calc-list")
    .addEventListener('click', function () {
      var innerHTML = event.target.innerHTML;
      switch (innerHTML) {
        case 'c':
          formula = '';
          calcScreen.innerHTML = '';
          break;
        case 'del':
          formula = formula.substr(0, formula.length - 1);
          calcScreen.innerHTML = formula;
          break;
        case '=':
          result = '';
          try {
            if (formula !== '') {
              result = eval(formula);
              calcScreen.innerHTML = result;
            }
          } catch (EvalError) {
            calcScreen.innerHTML = "式子有误！";
          }
          break;
        case 'pow':
          formula = 'Math.pow('+formula+', ';
          calcScreen.innerHTML = formula;
          break;
        case 'sqrt':
          formula = 'Math.sqrt('+formula+')';
          calcScreen.innerHTML = formula;
          break;
        default:
          formula += innerHTML;
          calcScreen.innerHTML = formula;
      }
    });
</script>
</body>
</html>
